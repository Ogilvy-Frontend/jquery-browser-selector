<project name="jQuery.Browser.Selector" default="min">
	
	<!-- Opções -->
	<property name="name" value="jquery.browser.selector" />
	<property name="version" value="1.1" />
	<property name="src" value="../src"/>
	<property name="local" value="${version}"/>
	
	<!-- Código Fonte -->
	<target name="fonte">
	
		<echo>Criando código fonte.</echo>
		
		<mkdir dir="${local}" />
		
		<concat destfile="${local}/${name}.js" encoding="UTF-8">
			<header trimleading="yes">/**
			 * jQuery Browser Selectors - Solução Cross-Browser para seletores CSS.
			 * By Mateus Souza - www.mateussouza.com
 			 * @version 1.1
			 *
			 * Copyright 2010
			 * Licensed under MIT and GPL License - http://www.opensource.org/licenses/mit-license.php || http://www.gnu.org/licenses/gpl.html
			 */
			</header>
			<fileset file="${src}/${name}.js" />
        </concat>
		
	</target>
	
	<!-- Versão Minifield-->
	<target name="min" depends="fonte">
		
		<echo>Criando/alterando versão minifield.</echo>
		
		<apply executable="java" parallel="false" verbose="true" dest="${local}">
			<fileset dir="${local}">
				<include name="${name}.js" />
			</fileset>
			<arg line="-jar"/>
			<arg path="google-compiler.jar"/>
			<arg value="--warning_level" />
			<arg value="QUIET" />
			<arg value="--js_output_file" />
			<targetfile />
			<arg value="--js" />
			<mapper type="glob" from="${name}.js" to="temp" />
		</apply>
		
		<concat destfile="${local}/${name}.min.js">
			<filelist files="${local}/${name}.js, ${local}/temp"/>
			<filterchain>
				<headfilter lines="8"/>
			</filterchain>
		</concat>
		<concat destfile="${local}/${name}.min.js" append="yes">
			<filelist files="${local}/temp"/>
		</concat>
		
		<copy file="${local}/${name}.min.js" todir="../" overwrite="true" />

		<delete dir="${local}" quiet="true"/>
	</target>
	
</project>
